# Проект по разработке распределенных приложений - Продажа ЖД билетов

![ERD.drawio](src%2Fmain%2Fresources%2FERD.drawio)


Требуется реализовать прототип распределенной системы для продажи железнодорожных билетов для одной из наиболее развитых железнодорожных сетей мира. Система должна обеспечивать устойчивость к обрывам связи при стабильной гарантированной производительности.
Для хранения данных предлагается использовать кластер MongoDB с шардингом и репликацией.
Для поиска поездов и доступных билетов - ElasticSearch
Для кэширования справочников (станций) - кэш Hazelcast
Для блокирования места при бронировании и до получения оплаты - механизм блокировок в Hazelcast
Основные сущности:
- Остановочный пункт (Station) - справочник станций, которые могут быть пунктом отправления или назначения в билете (Москва, Бологое, Санкт-Петербург)
- Маршрут (Route) - множество станций, на которых останавливается поезд (маршрут #251: Москва, Тверь, Вышний Волочек, Бологое, Санкт-Петербург)
- Поезд (Train) - поезд, назначенный на указанные маршрут на конкретную дату (рейс поезда следует, назначенный на 25.09.2017  следует по маршруту #251)
- Билет (TicketPlace) - место в поезде, свободное или купленное.
  Сценарии:

  Инициализация поездов
  Заполнение данными Station, Route
  Заполнение данными Train и TicketPlace (порядка миллионов документов в TicketPlace)
  Поиск свободных мест и покупка билета
  Пользователь вводит станции отправления и назначения, дату отправления
  Система определяет подходящие по станциям маршруты и ищет поезда, следующие по этим маршрутам, отображая только те, на которых есть свободные места
  Пользователь выбирает поезд, система отображает свободные места
  Пользователь выбирает свободное место и нажимает "Купить билет"
  Система блокирует указанное место до символической "велиоплаты"
  Пользователь оплачивает билет
  Система помечает билет как купленные и снимает блокировку